<div class="main-wrapper">
  <header class="chat-header">
    <div class="header-content">
      <div class="avatar-container">
        <span class="avatar-emoji">ðŸ¤–</span>
        <span class="status-indicator"></span>
      </div>
      <div class="title">
        <h2>Lin</h2>
        <p>Your friendly English coach</p>
      </div>
    </div>
  </header>

  <div class="chat-box" #scrollMe>
    @for (m of messages; track m) {
      <div [ngClass]="m.role === 'user' ? 'msg-user' : 'msg-coach'" class="message-container">
        <div class="bubble">
          <div class="bubble-content">
            {{ m.content }}
          </div>
        </div>
      </div>
    }
  </div>

  <footer class="controls">
    <div class="input-wrapper">
      <button
        (mousedown)="startRecording()"
        (mouseup)="stopRecording()"
        [class.recording]="isRecording"
        class="btn-mic"
        title="Hold to speak"
      >
        {{ isRecording ? 'ðŸ›‘' : 'ðŸŽ¤' }}
      </button>

      <input
        [(ngModel)]="userInput"
        (keyup.enter)="sendMessage()"
        placeholder="Type or speak in English..."
      />

      <button (click)="sendMessage()" class="btn-send" [disabled]="!userInput.trim()">
        âž¤
      </button>
    </div>
  </footer>
</div>